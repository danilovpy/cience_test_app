<template>
  <nav>
    <v-navigation-drawer v-model="drawer" app>
      <!-- Left menu -->
      <v-list navdense>
        <v-list-item-group v-model="group">
          <v-subheader>Menu</v-subheader>
          <v-list-item link :to="{ name: 'Home' }">
            <v-list-item-icon>
              <v-icon>mdi-home</v-icon>
            </v-list-item-icon>
            <v-list-item-title>Home</v-list-item-title>
          </v-list-item>
          <v-list-item link :to="{ name: 'Messages' }">
            <v-list-item-icon>
              <v-icon>mdi-monitor-dashboard</v-icon>
            </v-list-item-icon>
            <v-list-item-title>Messages</v-list-item-title>
          </v-list-item>
          <v-list-item link :to="{ name: 'Data Import' }">
            <v-list-item-icon>
              <v-icon>mdi-monitor-dashboard</v-icon>
            </v-list-item-icon>
            <v-list-item-title>Data Import</v-list-item-title>
          </v-list-item>
          <v-list-item link :to="{ name: 'Data Import' }">
            <v-list-item-icon>
              <v-icon>mdi-chart-bar</v-icon>
            </v-list-item-icon>
            <v-list-item-title>Statistics </v-list-item-title>
          </v-list-item>

          <v-list-item link :to="{ name: 'Application Settings' }">
            <v-list-item-icon>
              <v-icon>mdi-cog</v-icon>
            </v-list-item-icon>
            <v-list-item-title>Application settings</v-list-item-title>
          </v-list-item>
        </v-list-item-group>
      </v-list>
    </v-navigation-drawer>

    <v-app-bar app color="#032e9b">
      <v-app-bar-nav-icon
        color="white"
        @click="drawer = !drawer"
      ></v-app-bar-nav-icon>

      <svg
        width="150"
        height="34"
        color="white"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M14.5096 20.8664C13.7851 20.865 13.0772 20.6456 12.4755 20.2359C11.8738 19.8263 11.4053 19.2448 11.1292 18.565C10.8532 17.8852 10.782 17.1376 10.9246 16.4167C11.0672 15.6958 11.4172 15.034 11.9305 14.515C12.4437 13.996 13.0971 13.6431 13.8079 13.5009C14.5188 13.3587 15.2553 13.4335 15.9242 13.716C16.5931 13.9985 17.1645 14.476 17.5661 15.088C17.9677 15.7 18.1814 16.4191 18.1802 17.1544C18.1775 18.1402 17.7895 19.0847 17.1013 19.7806C16.4132 20.4765 15.4811 20.867 14.5096 20.8664ZM14.5212 15.3025C14.1612 15.3018 13.809 15.4095 13.5093 15.6118C13.2096 15.8142 12.9758 16.1023 12.8374 16.4395C12.6989 16.7768 12.6622 17.1481 12.7318 17.5066C12.8013 17.865 12.9741 18.1945 13.2282 18.4533C13.4822 18.7122 13.8062 18.8887 14.1592 18.9607C14.5122 19.0326 14.8782 18.9968 15.2111 18.8576C15.544 18.7184 15.8287 18.4822 16.0293 18.1788C16.2299 17.8755 16.3373 17.5185 16.338 17.1532C16.3389 16.9105 16.2926 16.67 16.2017 16.4455C16.1108 16.221 15.9771 16.0169 15.8083 15.845C15.6395 15.673 15.4389 15.5366 15.2181 15.4435C14.9972 15.3504 14.7604 15.3025 14.5212 15.3025Z"
          fill="currentColor"
        ></path>
        <path
          d="M18.8302 33.9715L10.1567 33.9575C9.37522 34.0443 8.58509 33.9158 7.86952 33.5853C7.15396 33.2549 6.53942 32.7348 6.0906 32.0798C4.74503 32.5616 3.32879 32.8088 1.9019 32.8109C1.58944 32.8123 1.27712 32.7967 0.966323 32.7639C0.767035 32.7396 0.581107 32.6496 0.436994 32.5078C0.292881 32.366 0.198524 32.1802 0.168365 31.9788C-1.00197 24.4152 4.26108 19.7292 5.71938 18.5873C6.34647 11.7155 9.23275 5.25743 13.9141 0.251564C14.0853 0.089883 14.3105 0 14.5443 0C14.7782 0 15.0034 0.089883 15.1746 0.251564C19.8428 5.27154 22.7095 11.7403 23.3126 18.6155C24.7732 19.762 30.0201 24.4633 28.8243 32.0246C28.7934 32.2258 28.6983 32.4112 28.5535 32.5522C28.4087 32.6931 28.2223 32.782 28.0229 32.805C27.7156 32.8375 27.4067 32.852 27.0977 32.8484C25.67 32.8423 24.2536 32.5904 22.909 32.1032C22.4581 32.7587 21.841 33.2783 21.123 33.6072C20.4051 33.9361 19.6129 34.0619 18.8302 33.9715ZM14.8982 32.0938L18.8302 32.1009C20.0664 32.1009 20.773 31.8826 21.2009 31.3111C21.046 31.2266 20.8609 31.1421 20.6724 31.0517C19.4951 30.4919 17.713 29.6434 17.713 27.7094C17.6987 27.3166 17.7613 26.9247 17.8974 26.5566C18.0334 26.1886 18.2402 25.8516 18.5056 25.5652C18.771 25.2789 19.0898 25.0488 19.4435 24.8885C19.7972 24.7281 20.1787 24.6407 20.566 24.6311C20.9876 24.6356 21.4029 24.7354 21.7816 24.9235C22.1604 25.1115 22.493 25.3829 22.7552 25.7179C23.3802 26.5766 23.6943 27.6277 23.6445 28.694C23.6454 29.2443 23.6025 29.7938 23.5161 30.337C24.6629 30.7556 25.8721 30.9712 27.0908 30.9743C27.7523 24.0502 22.1538 20.0601 21.9087 19.8911C21.7975 19.8127 21.7044 19.7107 21.6359 19.5921C21.5674 19.4736 21.5252 19.3414 21.512 19.2046C20.9771 12.9677 18.5386 7.05536 14.5362 2.29122C10.5258 7.05008 8.06982 12.9548 7.50726 19.1905C7.49387 19.3274 7.45098 19.4597 7.38163 19.5779C7.31228 19.6961 7.21818 19.7975 7.10597 19.8747C6.85965 20.0449 1.2485 24.0174 1.88918 30.9402H1.89612C3.11385 30.9385 4.3225 30.7274 5.47074 30.3159C5.38475 29.7727 5.34413 29.2231 5.34931 28.6729C5.30159 27.6072 5.61821 26.5575 6.24557 25.7014C6.50867 25.3677 6.8418 25.0977 7.22071 24.9112C7.59962 24.7246 8.01476 24.6261 8.4359 24.6229C8.82329 24.6332 9.20481 24.7215 9.55827 24.8827C9.91172 25.0439 10.2301 25.2749 10.4948 25.5621C10.7595 25.8493 10.9653 26.187 11.1003 26.5556C11.2352 26.9243 11.2966 27.3165 11.2808 27.7094C11.2808 29.6493 9.49175 30.4884 8.31563 31.0411C8.12135 31.1315 7.94209 31.2148 7.7825 31.3005C8.21039 31.872 8.91815 32.095 10.1498 32.0974L14.8982 32.0938ZM8.44053 26.4842C7.69114 26.4842 7.20312 27.3374 7.2008 28.6659C7.2008 28.9561 7.21198 29.228 7.23434 29.4815L7.54543 29.3336C8.65794 28.8137 9.44549 28.3948 9.44549 27.6965C9.46296 27.5488 9.45032 27.399 9.40835 27.2564C9.36639 27.1139 9.29599 26.9816 9.20153 26.8678C9.10707 26.754 8.99057 26.6611 8.85926 26.5949C8.72795 26.5287 8.58464 26.4907 8.43822 26.483L8.44053 26.4842ZM20.5649 26.503C20.4192 26.5114 20.2767 26.55 20.1462 26.6164C20.0158 26.6828 19.9001 26.7755 19.8063 26.889C19.7125 27.0024 19.6425 27.1341 19.6007 27.276C19.559 27.4179 19.5462 27.567 19.5634 27.7141C19.5634 28.4065 20.3463 28.829 21.4542 29.3571L21.7653 29.5061C21.7907 29.2526 21.7988 28.9827 21.8023 28.6905C21.7988 27.3597 21.3142 26.5042 20.5625 26.5018L20.5649 26.503Z"
          fill="currentColor"
        ></path>
        <path
          d="M44.9409 9.00227C45.9215 8.97804 46.8972 9.14799 47.8121 9.50239C48.727 9.85679 49.563 10.3887 50.2722 11.0675C50.3177 11.1044 50.3546 11.1506 50.3805 11.2031C50.4064 11.2557 50.4207 11.3132 50.4224 11.3717C50.4241 11.4303 50.4131 11.4885 50.3902 11.5424C50.3673 11.5963 50.3331 11.6446 50.2898 11.684L48.9451 13.073C48.9122 13.1143 48.8704 13.1476 48.8229 13.1705C48.7753 13.1934 48.7233 13.2052 48.6705 13.2052C48.6178 13.2052 48.5657 13.1934 48.5182 13.1705C48.4706 13.1476 48.4289 13.1143 48.3959 13.073C47.4586 12.2452 46.2566 11.7804 45.0072 11.7626C43.6859 11.8154 42.4362 12.3783 41.52 13.3334C40.6037 14.2885 40.092 15.5617 40.092 16.8863C40.092 18.211 40.6037 19.4842 41.52 20.4393C42.4362 21.3944 43.6859 21.9573 45.0072 22.01C46.2456 21.9994 47.4415 21.5566 48.3891 20.7579C48.464 20.689 48.562 20.6507 48.6638 20.6507C48.7655 20.6507 48.8635 20.689 48.9384 20.7579L50.3047 22.1727C50.3799 22.255 50.4197 22.3637 50.4157 22.4752C50.4116 22.5868 50.364 22.6922 50.283 22.7689C48.8472 24.1591 46.9214 24.9252 44.9246 24.9005C43.8825 24.8991 42.8509 24.6921 41.8887 24.2913C40.9265 23.8905 40.0525 23.3038 39.3166 22.5646C38.5807 21.8255 37.9974 20.9484 37.5999 19.9834C37.2024 19.0184 36.9986 17.9844 37 16.9406C37.0014 15.8967 37.2081 14.8633 37.6082 13.8994C38.0083 12.9355 38.594 12.06 39.3319 11.3228C40.0698 10.5857 40.9454 10.0014 41.9087 9.60321C42.872 9.20505 43.9042 9.00085 44.9463 9.00227H44.9409ZM55.3939 9.66221C55.3976 9.55257 55.4426 9.44839 55.5199 9.37069C55.5972 9.29299 55.7011 9.24753 55.8105 9.24348H57.86C57.9698 9.24718 58.0742 9.29244 58.152 9.37015C58.2298 9.44785 58.2753 9.55222 58.2794 9.66221L58.2577 24.2812C58.2533 24.3918 58.2068 24.4964 58.1278 24.5737C58.0489 24.6511 57.9434 24.6953 57.833 24.6973H55.7875C55.6772 24.6938 55.5723 24.6483 55.4943 24.57C55.4164 24.4916 55.3712 24.3864 55.3682 24.2758L55.3939 9.66221ZM64.4954 9.67712C64.4951 9.62215 64.5056 9.56764 64.5264 9.51677C64.5472 9.46589 64.5779 9.41965 64.6166 9.38071C64.6553 9.34178 64.7014 9.31092 64.7521 9.28992C64.8029 9.26893 64.8572 9.25821 64.9121 9.25839L73.8797 9.27465C73.9349 9.27338 73.9898 9.28322 74.0412 9.30359C74.0925 9.32396 74.1392 9.35445 74.1786 9.39325C74.218 9.43204 74.2492 9.47835 74.2703 9.52944C74.2915 9.58053 74.3022 9.63536 74.3018 9.69067V11.5025C74.3016 11.5577 74.2906 11.6124 74.2692 11.6634C74.2479 11.7144 74.2168 11.7607 74.1776 11.7996C74.1383 11.8385 74.0919 11.8693 74.0407 11.8901C73.9896 11.911 73.9349 11.9216 73.8797 11.9212L67.3539 11.9117L67.3444 15.5326L72.7921 15.5434C72.9024 15.5468 73.0072 15.5921 73.0854 15.6701C73.1635 15.7482 73.2091 15.8531 73.2128 15.9635V17.797C73.211 17.9083 73.1656 18.0145 73.0864 18.0925C73.0072 18.1706 72.9005 18.2144 72.7894 18.2144L67.3458 18.2062V22.071L73.8689 22.0792C73.9802 22.0799 74.0866 22.1245 74.1651 22.2035C74.2437 22.2824 74.2879 22.3892 74.2883 22.5006V24.3138C74.2876 24.4249 74.2429 24.5313 74.164 24.6095C74.0852 24.6878 73.9786 24.7315 73.8676 24.7311L64.8932 24.7176C64.7824 24.7165 64.6766 24.6716 64.5988 24.5926C64.521 24.5137 64.4775 24.4071 64.4779 24.2961L64.4954 9.67712ZM79.6561 9.45624C79.6624 9.34816 79.7101 9.24668 79.7892 9.17296C79.8684 9.09923 79.9729 9.05896 80.0809 9.06054H80.622L89.7791 18.8364H89.8021L89.8142 9.71777C89.8142 9.60636 89.8584 9.49951 89.9371 9.42073C90.0157 9.34195 90.1224 9.29769 90.2336 9.29769H92.2628C92.3727 9.30142 92.4771 9.34692 92.5547 9.42494C92.6323 9.50297 92.6774 9.60766 92.6808 9.71777L92.6578 24.5766C92.6529 24.6845 92.6062 24.7861 92.5276 24.86C92.4491 24.9339 92.3448 24.9742 92.2371 24.9723H91.7095L82.5105 14.8239H82.4889L82.4713 24.3178C82.4713 24.3731 82.4604 24.4279 82.4391 24.479C82.4178 24.5301 82.3867 24.5764 82.3474 24.6153C82.3082 24.6543 82.2616 24.685 82.2104 24.7058C82.1593 24.7266 82.1045 24.7371 82.0492 24.7365H80.0444C79.9343 24.7322 79.8298 24.6867 79.7517 24.6089C79.6735 24.5311 79.6273 24.4267 79.6223 24.3165L79.6561 9.45624ZM105.739 9.1039C106.719 9.07866 107.694 9.2479 108.609 9.60188C109.523 9.95586 110.358 10.4876 111.067 11.1664C111.112 11.2029 111.15 11.2488 111.176 11.3011C111.203 11.3534 111.217 11.4108 111.219 11.4694C111.222 11.528 111.211 11.5863 111.189 11.6404C111.166 11.6945 111.132 11.7432 111.09 11.783L109.746 13.1706C109.713 13.2124 109.671 13.2461 109.623 13.2693C109.575 13.2925 109.523 13.3045 109.47 13.3045C109.416 13.3045 109.364 13.2925 109.316 13.2693C109.268 13.2461 109.226 13.2124 109.193 13.1706C108.256 12.3417 107.053 11.878 105.803 11.8643C104.482 11.917 103.233 12.4797 102.317 13.4346C101.401 14.3895 100.889 15.6624 100.889 16.9866C100.889 18.3109 101.401 19.5838 102.317 20.5386C103.233 21.4935 104.482 22.0562 105.803 22.109C107.042 22.1004 108.239 21.6568 109.185 20.8555C109.258 20.7865 109.355 20.7481 109.455 20.7481C109.556 20.7481 109.653 20.7865 109.726 20.8555L111.095 22.2675C111.17 22.3503 111.209 22.4595 111.204 22.5712C111.199 22.683 111.15 22.7882 111.068 22.8638C109.635 24.256 107.71 25.0237 105.714 24.9994C104.671 24.9981 103.64 24.7912 102.678 24.3905C101.715 23.9897 100.841 23.4031 100.105 22.664C99.3694 21.9249 98.786 21.0479 98.3884 20.0829C97.9909 19.118 97.7869 18.084 97.7883 17.0402C97.7896 15.9963 97.9962 14.9629 98.3962 13.9989C98.7962 13.035 99.3819 12.1595 100.12 11.4223C100.857 10.6851 101.733 10.1006 102.696 9.7024C103.66 9.30415 104.692 9.09986 105.734 9.10119L105.739 9.1039ZM116.187 9.75707C116.188 9.64565 116.233 9.53915 116.312 9.46073C116.391 9.38232 116.498 9.33834 116.609 9.33834L125.578 9.35325C125.633 9.35307 125.688 9.36384 125.739 9.38494C125.791 9.40604 125.837 9.43705 125.876 9.4762C125.916 9.51536 125.947 9.56188 125.968 9.6131C125.989 9.66432 126 9.71923 126 9.77469V11.5851C126 11.6403 125.989 11.695 125.968 11.746C125.947 11.797 125.916 11.8433 125.877 11.8822C125.838 11.9211 125.791 11.9519 125.74 11.9728C125.689 11.9936 125.634 12.0042 125.579 12.0039L119.056 11.993L119.048 15.6152L124.496 15.6247C124.606 15.6285 124.71 15.6743 124.787 15.7527C124.864 15.831 124.909 15.9361 124.911 16.0462V17.8769C124.911 17.9318 124.901 17.9861 124.88 18.0368C124.859 18.0875 124.828 18.1336 124.79 18.1725C124.751 18.2113 124.706 18.2422 124.655 18.2634C124.605 18.2845 124.55 18.2955 124.496 18.2957L119.048 18.2875V22.151L125.571 22.1632C125.626 22.163 125.681 22.1737 125.732 22.1948C125.783 22.2158 125.829 22.2467 125.869 22.2857C125.908 22.3248 125.939 22.3711 125.96 22.4222C125.981 22.4732 125.992 22.528 125.992 22.5833V24.3937C125.991 24.5054 125.946 24.6122 125.867 24.6909C125.788 24.7696 125.681 24.8138 125.57 24.8138L116.601 24.7975C116.546 24.7979 116.491 24.7873 116.441 24.7664C116.39 24.7454 116.344 24.7146 116.305 24.6756C116.266 24.6366 116.235 24.5903 116.215 24.5394C116.194 24.4884 116.184 24.4338 116.184 24.3788L116.187 9.75707Z"
          fill="currentColor"
        ></path>
      </svg>
      <v-spacer></v-spacer>
      <!-- User menu -->
      <v-menu offset-y>
        <template v-slot:activator="{ on, attrs }">
          <v-btn icon v-bind="attrs" v-on="on">
            <v-avatar
              ><v-icon color="white"
                >mdi-account-circle-outline</v-icon
              ></v-avatar
            >
          </v-btn>
        </template>

        <v-list dense>
          <v-list-item-group color="primary">
            <v-list-item @click="logout">
              <v-list-item-icon>
                <v-icon>mdi-account-circle</v-icon>
              </v-list-item-icon>
              <v-list-item-content>
                <v-list-item-title>Logout</v-list-item-title>
              </v-list-item-content>
            </v-list-item>
            <v-list-item>
              <g-signin-button
                v-if="isEmpty(user)"
                :params="googleSignInParams"
                @success="onGoogleSignInSuccess"
                @error="onGoogleSignInError"
              >
                <v-list-item-icon>
                  <v-icon>mdi-login-variant</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>Login</v-list-item-title>
                </v-list-item-content>
              </g-signin-button>
            </v-list-item>
          </v-list-item-group>
        </v-list>
      </v-menu>
    </v-app-bar>
  </nav>
</template>

<script>
import auth from "../api/auth.js";
export default {
  data: () => ({
    user: {},
    drawer: true,
    group: null,
    googleSignInParams: {
      client_id:
        "492568801544-oeebduag9v5j7pv1rdj1jejpq2q38u7j.apps.googleusercontent.com",
    },
  }),
  methods: {
    isEmpty(obj) {
      return Object.keys(obj).length === 0;
    },
    async onGoogleSignInSuccess(resp) {
      const token = resp.Zb.access_token;
      await auth.authenticate(token);
      this.$router.go(this.$router.currentroute);
    },
    onGoogleSignInError(error) {
      console.log("OH NOES", error);
    },
    async logout() {
      await auth.logout();
      this.$router.go(this.$router.currentroute);
    },
  },
  computed: {},
  mounted() {},
};
</script>
